<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2025 IT본부 퀴즈</title>
  <meta name="description" content="시맨틱 태그, 폼, 테이블, 이미지 등 예제 모음" />
  <style>
    /* 간단한 스타일 (테스트용) */
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR"; line-height: 1.6; padding: 1rem; }
    header, nav, main, footer, aside, section { margin-bottom: 1rem; }
    nav ul { list-style: none; padding: 0; display:flex; gap:0.5rem; }
    .container { max-width: 900px; margin: 0 auto; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
    form > * { display:block; margin:0.4rem 0; }
   
   .square-wrap {
    display: flex;
    flex-wrap: nowrap;    /* 줄바꿈 방지 */
    gap: 10px;             /* 박스 간 간격 */
    overflow-x: auto;     /* 만약 화면이 좁으면 가로 스크롤 */
    padding-bottom: 10px; /* 미세 공간 */
    -webkit-overflow-scrolling: touch;
  }
  .square-text {
    font-size: clamp(28px, 7vw, 50px);
    width: 1.1em;
    height: 1.1em;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;       
    border: 2px solid #000;            /* 검정 테두리 굵게 */
    border-radius: 6px;
    flex-shrink: 0;       /* 좁아져도 박스 크기 유지 (줄내림 방지 핵심) */
  }

  </style>
	<script type="text/javascript">
    var step;
    
	  function httpReq(loadURL, callback) {
  	  var xhr = new XMLHttpRequest();
				
				xhr.onload = function(){
					
					if(xhr.readyState == 4 && xhr.status == 200) {
            callback(null, xhr.responseText);
					}
	      }
	      
	     	xhr.open("GET", loadURL);
				xhr.send();
	  }
	  
	  function init() {
	    httpReq("https://tpay2.billgate.net/paytest/odkwon/event_2025/step.jsp?gubun=GET", stepResult);
	  }
	  
	  function stepResult(err, result) {
     step = result;

	   if ( step == "0") {
	      document.getElementById("intro").style.display = "";	   
	   }else{
  	   httpReq("https://raw.githubusercontent.com/oduck-kwon/event/main/quiz_2025.json", jsonResult);
	   }

	  }
	  
	  function jsonResult(err, result) {
    
	    const json = JSON.parse(result);
	    
	    const jsonSub = json[step];
	    	    
	    var title = jsonSub["title"];
	    var content = jsonSub["content"];

      document.getElementById("title").innerHTML = title;
      
      if ( Array.isArray(content) ) {
        console.log("배열");

        for (var i = 0; i < content.length; i++) {
          const newLi = document.createElement('li');
          newLi.classList.add("square-wrap");
		  newLi.innerHTML = content[i].replace(/\*/gi, '<span class="square-text"></span>');
          document.getElementById("content_array").appendChild(newLi);
        }
        
        document.getElementById("content_array").style.display = "";	
      }else{
        console.log("단일");     
         document.getElementById("content").innerHTML = content.replace(/\*/gi, '<span class="square-text"></span>');
         document.getElementById("content").style.display = "";	
      }
      
      document.getElementById("quiz").style.display = "";	
	  }
	</script>
</head>
<body onload="init();">
  <div class="container">
    <!-- 헤더 -->
    <header>
      <h1>2025 IT본부 퀴즈</h1>
      <p>모두 참여해 주시면 감사하겠습니다. (make by 권오덕) </p>
	  <p><button type="button" onclick="javascript:location.reload();" >새로고침</button></p>
    </header>
    
    <main>
      <!-- 소개 섹션 -->
      <section id="intro" style="display:none;">
        <p style="color:red;"><strong>잠시후 퀴즈 행사가 시작 됩니다.<br>잠시만 기다려주세요.<br>(손을 들고 정답을 외쳐주세요)</strong></p>
      </section>
      
      <section id="quiz" style="display:none;">
        <h2 id="title">&nbsp;</h2>
        <p id="content" class="square-wrap" style="font-weight: bold;color:red;display:none;">&nbsp;</p>
        <ul id="content_array" style="font-weight: bold;color:red;display:none;">
        </ul>
      </section>
    </main>

    <!-- 푸터 -->
    <footer>
    </footer>
  </div>

</body>
</html>
